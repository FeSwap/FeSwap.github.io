<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="FeSwap Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="FeSwap Blog Atom Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">FESW DAO | FeSwap</title><meta data-react-helmet="true" property="og:url" content="https://wwww.feswap.io/docs/Contracts/fesw"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="FESW DAO | FeSwap"><meta data-react-helmet="true" name="description" content="FeSwap Governance Token"><meta data-react-helmet="true" property="og:description" content="FeSwap Governance Token"><link data-react-helmet="true" rel="shortcut icon" href="/img/Fesw.png"><link data-react-helmet="true" rel="canonical" href="https://wwww.feswap.io/docs/Contracts/fesw"><link data-react-helmet="true" rel="alternate" href="https://wwww.feswap.io/docs/Contracts/fesw" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wwww.feswap.io/cn/docs/Contracts/fesw" hreflang="cn"><link data-react-helmet="true" rel="alternate" href="https://wwww.feswap.io/docs/Contracts/fesw" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.b01f1036.css">
<link rel="preload" href="/assets/js/runtime~main.776b16e6.js" as="script">
<link rel="preload" href="/assets/js/main.82801d3f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/Fesw.png" alt="FeSwap Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/Fesw.png" alt="FeSwap Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">FeSwap Exchange</b></a><a class="navbar__item navbar__link" href="/Swap">Swap</a><a class="navbar__item navbar__link" href="/Liquidity">Liquidity</a><a class="navbar__item navbar__link" href="/NFT">NFT</a><a class="navbar__item navbar__link" href="/Sponsor">Sponsor</a></div><div class="navbar__items navbar__items--right"><a href="https://app.feswap.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>App<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://ipfs.feswap.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>@ipfs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs ðŸ“š</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/blog">Blog ðŸ’¬</a></li><li><a class="dropdown__link" href="/download">Download â¤µ</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/Contracts/fesw" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/cn/docs/Contracts/fesw" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">ä¸­æ–‡</a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">FeSwap Overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">FeSwap Contracts</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/Contracts/fesw">FESW DAO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Contracts/factory">Factory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Contracts/router">Router</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Contracts/nft">Token Pair NFT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Contracts/sponsor">Sponsor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Contracts/StakingTwinRewardsFactory">Staking Reward Factory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Contracts/StakingTwinRewards">Staking Reward</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Contracts/Timelock">TimeLock</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Contracts/FeswGovernor">FeSwap Governor</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">FeSwap Governance</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FeSwap/introduction">FeSwap Decentralized Exchange</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FeSwap/implementation">FeSwap Features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FeSwap/governance">governance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FeSwap/nft">FeSwap Swap Pair NFT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FeSwap/schedule">Project milestone</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FeSwap/conclusion">FeSwap conclusion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FeSwap/reference">Reference</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">FreeSwap Exchange Protocol</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FreeSwap/abstract">Abstract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FreeSwap/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FreeSwap/basics">Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FreeSwap/protocol">Procotol</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FreeSwap/arbitrage-fair">Fairness analysis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FreeSwap/arbitrage-profit">Profit analysis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FreeSwap/conclusion">Conclusion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FreeSwap/reference">References</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col"><div class="docItemContainer_33ec"><article><div class="markdown"><div class="title"><header><h1 class="h1Heading_27L5"> FeSwap Governance Token </h1></header></div><hr><p>FESW is the FeSwap DAO governance token, which represents the votes to FeSwap DAO governance proposals. FESW is ERC20 compliant, and provides interface to managing the voting rights. </p><p>FESW cap is 1000,000,000 FESW, and is distributed to FeSwap community members based on the contribution to FeSwap DAO, including providing liquidity, conducting swap, sponsoring, NFT bidding, developing, marketing, governance voting, and so on. Please refer to <a href="/docs/FeSwap/governance">FeSwap Governance</a> for the distribution rules.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="fesw-token-address"></a><span class="title"> FESW Token Address </span><a class="hash-link" href="#fesw-token-address" title="Direct link to heading">#</a></h3><table><thead><tr><th align="center">ETH NetWork</th><th align="center">FESW Token Address</th></tr></thead><tbody><tr><td align="center">ETH Mainnet</td><td align="center">Waiting</td></tr><tr><td align="center">ETH Testnet Ropsten</td><td align="center"><a href="https://ropsten.etherscan.io/address/0xcfcc81c508a8025879a27257cc0f699f9f2016ab" target="_blank" rel="noopener noreferrer">0xcfcc81c508a8025879a27257cc0f699f9f2016ab</a></td></tr><tr><td align="center">ETH Testnet Rinkeby</td><td align="center"><a href="https://rinkeby.etherscan.io/address/0xcfcc81c508a8025879a27257cc0f699f9f2016ab" target="_blank" rel="noopener noreferrer">0xcfcc81c508a8025879a27257cc0f699f9f2016ab</a></td></tr><tr><td align="center">ETH Testnet Goerli</td><td align="center"><a href="https://goerli.etherscan.io/address/0xcfcc81c508a8025879a27257cc0f699f9f2016ab" target="_blank" rel="noopener noreferrer">0xcfcc81c508a8025879a27257cc0f699f9f2016ab</a></td></tr><tr><td align="center">ETH Testnet Kovan</td><td align="center"><a href="https://kovan.etherscan.io/address/0xcfcc81c508a8025879a27257cc0f699f9f2016ab" target="_blank" rel="noopener noreferrer">0xcfcc81c508a8025879a27257cc0f699f9f2016ab</a></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="fesw-token-code"></a><span class="title"> FESW Token Code </span><a class="hash-link" href="#fesw-token-code" title="Direct link to heading">#</a></h3><p>FESW token code is open-sourced at <a href="https://github.com/FeSwap/Governance/blob/main/contracts/Feswap.sol" target="_blank" rel="noopener noreferrer">Github FeSwapCore Project</a> </p><p>Following is the code deployed:</p><div class="codeBlockContainer_K1bP"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_eoMF">Feswap.sol</div><div class="codeBlockContent_hGly sol"><pre tabindex="0" class="prism-code language-sol codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// SPDX-License-Identifier: GPL-3.0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pragma solidity ^0.7.0;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pragma experimental ABIEncoderV2;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import &quot;./utils/SafeMath.sol&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">contract Fesw {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice EIP-20 token name for this token</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    string public constant name = &quot;FeSwap DAO&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice EIP-20 token symbol for this token</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    string public constant symbol = &quot;FESW&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice EIP-20 token decimals for this token</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    uint8 public constant decimals = 18;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice Total number of tokens in circulation</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    uint public totalSupply = 1_000_000_000e18;     // 1 billion FESW</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice Address which may mint and burn FESW tokens</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    address public minterBurner;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice The timestamp after which minting may occur</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    uint public mintingAllowedAfter;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice Minimum time between mints</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 public constant minimumTimeBetweenMints = 1 days * 365;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice Cap that can be minted at each mint after 5 years</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    uint public constant mintCap = 10_000_000e18;      // 10 million FESW</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // @notice Allowance amounts on behalf of others</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Documentation tag @notice not valid for non-public state variables</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    mapping (address =&gt; mapping (address =&gt; uint96)) internal allowances;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // @notice Official record of token balances for each account</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    mapping (address =&gt; uint96) internal balances;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice A record of each accounts delegate</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    mapping (address =&gt; address) public delegates;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice A checkpoint for marking number of votes from a given block</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    struct Checkpoint {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint32 fromBlock;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint96 votes;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice A record of votes checkpoints for each account, by index</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    mapping (address =&gt; mapping (uint32 =&gt; Checkpoint)) public checkpoints;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice The number of checkpoints for each account</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    mapping (address =&gt; uint32) public numCheckpoints;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice The EIP-712 typehash for the contract&#x27;s domain</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    bytes32 public constant DOMAIN_TYPEHASH = keccak256(&quot;EIP712Domain(string name,uint256 chainId,address verifyingContract)&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice The EIP-712 typehash for the delegation struct used by the contract</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    bytes32 public constant DELEGATION_TYPEHASH = keccak256(&quot;Delegation(address delegatee,uint256 nonce,uint256 expiry)&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice The EIP-712 typehash for the permit struct used by the contract</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    bytes32 public constant PERMIT_TYPEHASH = keccak256(&quot;Permit(address owner,address spender,uint256 value,uint256 nonce,uint256 deadline)&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice A record of states for signing / validating signatures</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    mapping (address =&gt; uint) public nonces;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice An event thats emitted when the minterBurner address is changed</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    event MinterBurnerChanged(address minterBurner, address newMinterBurner);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice An event thats emitted when an account changes its delegate</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    event DelegateChanged(address indexed delegator, address indexed fromDelegate, address indexed toDelegate);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice An event thats emitted when a delegate account&#x27;s vote balance changes</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    event DelegateVotesChanged(address indexed delegate, uint previousBalance, uint newBalance);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice The standard EIP-20 transfer event</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    event Transfer(address indexed from, address indexed to, uint256 amount);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// @notice The standard EIP-20 approval event</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    event Approval(address indexed owner, address indexed spender, uint256 amount);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Construct a new FESW token</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param account The initial account to grant all the tokens</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param minterBurner_ The account with minting/burning ability</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param mintingAllowedAfter_ The timestamp after which minting may occur</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    constructor(address account, address minterBurner_, uint mintingAllowedAfter_) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(mintingAllowedAfter_ &gt;= block.timestamp, &quot;FESW::constructor: minting can only begin after deployment&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        balances[account] = uint96(totalSupply);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        emit Transfer(address(0), account, totalSupply);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        minterBurner = minterBurner_;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        emit MinterBurnerChanged(address(0), minterBurner);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        mintingAllowedAfter = mintingAllowedAfter_;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Change the minter/burner address</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param minterBurner_ The address of the new minter/burner</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function setMinterBurner(address minterBurner_) external {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(msg.sender == minterBurner, &quot;FESW::setMinter: only the minter can change the minter address&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        emit MinterBurnerChanged(minterBurner, minterBurner_);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        minterBurner = minterBurner_;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Mint new tokens</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param dst The address of the destination account</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param rawAmount The number of tokens to be minted</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function mint(address dst, uint rawAmount) external {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(msg.sender == minterBurner, &quot;FESW::mint: only the minter can mint&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(block.timestamp &gt;= mintingAllowedAfter, &quot;FESW::mint: minting not allowed yet&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(dst != address(0), &quot;FESW::mint: cannot transfer to the zero address&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // record the mint</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        mintingAllowedAfter = SafeMath.add(block.timestamp, minimumTimeBetweenMints);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // mint the amount</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint96 amount = safe96(rawAmount, &quot;FESW::mint: amount exceeds 96 bits&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(amount &lt;= mintCap, &quot;FESW::mint: exceeded mint cap&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        totalSupply = safe96(SafeMath.add(totalSupply, amount), &quot;FESW::mint: totalSupply exceeds 96 bits&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // transfer the amount to the recipient</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        balances[dst] = add96(balances[dst], amount, &quot;FESW::mint: transfer amount overflows&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        emit Transfer(address(0), dst, amount);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // move delegates</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _moveDelegates(address(0), delegates[dst], amount);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Burn some tokens</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function burn() external {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(msg.sender == minterBurner, &quot;FESW::burn: Only the burner can burn&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // burn the amount</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint96 amount = balances[minterBurner];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(amount != 0, &quot;FESW::burn: No FESW token to burn&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        balances[minterBurner] = 0;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        totalSupply = SafeMath.sub(totalSupply, amount);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        emit Transfer(minterBurner, address(0), amount);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // move delegates</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _moveDelegates(delegates[minterBurner], address(0), amount);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Get the number of tokens `spender` is approved to spend on behalf of `account`</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param account The address of the account holding the funds</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param spender The address of the account spending the funds</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @return The number of tokens approved</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function allowance(address account, address spender) external view returns (uint) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return allowances[account][spender];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Approve `spender` to transfer up to `amount` from `src`</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @dev This will overwrite the approval amount for `spender`</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     *  and is subject to issues noted [here](https://eips.ethereum.org/EIPS/eip-20#approve)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param spender The address of the account which may transfer tokens</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param rawAmount The number of tokens that are approved (2^256-1 means infinite)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @return Whether or not the approval succeeded</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function approve(address spender, uint rawAmount) external returns (bool) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint96 amount;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if (rawAmount == uint(-1)) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            amount = uint96(-1);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        } else {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            amount = safe96(rawAmount, &quot;FESW::approve: amount exceeds 96 bits&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        allowances[msg.sender][spender] = amount;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        emit Approval(msg.sender, spender, amount);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return true;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Triggers an approval from owner to spends</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param owner The address to approve from</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param spender The address to be approved</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param rawAmount The number of tokens that are approved (2^256-1 means infinite)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param deadline The time at which to expire the signature</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param v The recovery byte of the signature</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param r Half of the ECDSA signature pair</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param s Half of the ECDSA signature pair</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function permit(address owner, address spender, uint rawAmount, uint deadline, uint8 v, bytes32 r, bytes32 s) external {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint96 amount;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if (rawAmount == uint(-1)) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            amount = uint96(-1);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        } else {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            amount = safe96(rawAmount, &quot;FESW::permit: amount exceeds 96 bits&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bytes32 domainSeparator = keccak256(abi.encode(DOMAIN_TYPEHASH, keccak256(bytes(name)), getChainId(), address(this)));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bytes32 structHash = keccak256(abi.encode(PERMIT_TYPEHASH, owner, spender, rawAmount, nonces[owner]++, deadline));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bytes32 digest = keccak256(abi.encodePacked(&quot;\x19\x01&quot;, domainSeparator, structHash));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address signatory = ecrecover(digest, v, r, s);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(signatory != address(0), &quot;FESW::permit: invalid signature&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(signatory == owner, &quot;FESW::permit: unauthorized&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(block.timestamp &lt;= deadline, &quot;FESW::permit: signature expired&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        allowances[owner][spender] = amount;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        emit Approval(owner, spender, amount);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Get the number of tokens held by the `account`</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param account The address of the account to get the balance of</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @return The number of tokens held</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function balanceOf(address account) external view returns (uint) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return balances[account];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Transfer `amount` tokens from `msg.sender` to `dst`</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param dst The address of the destination account</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param rawAmount The number of tokens to transfer</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @return Whether or not the transfer succeeded</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function transfer(address dst, uint rawAmount) external returns (bool) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint96 amount = safe96(rawAmount, &quot;FESW::transfer: amount exceeds 96 bits&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _transferTokens(msg.sender, dst, amount);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return true;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Transfer `amount` tokens from `src` to `dst`</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param src The address of the source account</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param dst The address of the destination account</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param rawAmount The number of tokens to transfer</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @return Whether or not the transfer succeeded</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function transferFrom(address src, address dst, uint rawAmount) external returns (bool) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address spender = msg.sender;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint96 spenderAllowance = allowances[src][spender];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint96 amount = safe96(rawAmount, &quot;FESW::approve: amount exceeds 96 bits&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if (spender != src &amp;&amp; spenderAllowance != uint96(-1)) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            uint96 newAllowance = sub96(spenderAllowance, amount, &quot;FESW::transferFrom: transfer amount exceeds spender allowance&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            allowances[src][spender] = newAllowance;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            emit Approval(src, spender, newAllowance);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _transferTokens(src, dst, amount);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return true;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Delegate votes from `msg.sender` to `delegatee`</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param delegatee The address to delegate votes to</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function delegate(address delegatee) public {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return _delegate(msg.sender, delegatee);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Delegates votes from signatory to `delegatee`</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param delegatee The address to delegate votes to</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param nonce The contract state required to match the signature</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param expiry The time at which to expire the signature</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param v The recovery byte of the signature</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param r Half of the ECDSA signature pair</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param s Half of the ECDSA signature pair</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function delegateBySig(address delegatee, uint nonce, uint expiry, uint8 v, bytes32 r, bytes32 s) public {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bytes32 domainSeparator = keccak256(abi.encode(DOMAIN_TYPEHASH, keccak256(bytes(name)), getChainId(), address(this)));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bytes32 structHash = keccak256(abi.encode(DELEGATION_TYPEHASH, delegatee, nonce, expiry));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bytes32 digest = keccak256(abi.encodePacked(&quot;\x19\x01&quot;, domainSeparator, structHash));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address signatory = ecrecover(digest, v, r, s);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(signatory != address(0), &quot;FESW::delegateBySig: invalid signature&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(nonce == nonces[signatory]++, &quot;FESW::delegateBySig: invalid nonce&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(block.timestamp &lt;= expiry, &quot;FESW::delegateBySig: signature expired&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return _delegate(signatory, delegatee);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Gets the current votes balance for `account`</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param account The address to get votes balance</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @return The number of current votes for `account`</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function getCurrentVotes(address account) external view returns (uint96) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint32 nCheckpoints = numCheckpoints[account];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return nCheckpoints &gt; 0 ? checkpoints[account][nCheckpoints - 1].votes : 0;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Determine the prior number of votes for an account as of a block number</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @dev Block number must be a finalized block or else this function will revert to prevent misinformation.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param account The address of the account to check</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param blockNumber The block number to get the vote balance at</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @return The number of votes the account had as of the given block</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function getPriorVotes(address account, uint blockNumber) public view returns (uint96) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(blockNumber &lt; block.number, &quot;FESW::getPriorVotes: not yet determined&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint32 nCheckpoints = numCheckpoints[account];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if (nCheckpoints == 0) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return 0;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // First check most recent balance</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if (checkpoints[account][nCheckpoints - 1].fromBlock &lt;= blockNumber) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return checkpoints[account][nCheckpoints - 1].votes;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // Next check implicit zero balance</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if (checkpoints[account][0].fromBlock &gt; blockNumber) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return 0;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint32 lower = 0;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint32 upper = nCheckpoints - 1;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        while (upper &gt; lower) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            uint32 center = upper - (upper - lower) / 2; // ceil, avoiding overflow</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Checkpoint memory cp = checkpoints[account][center];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            if (cp.fromBlock == blockNumber) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                return cp.votes;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            } else if (cp.fromBlock &lt; blockNumber) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                lower = center;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            } else {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                upper = center - 1;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return checkpoints[account][lower].votes;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function _delegate(address delegator, address delegatee) internal {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address currentDelegate = delegates[delegator];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint96 delegatorBalance = balances[delegator];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        delegates[delegator] = delegatee;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        emit DelegateChanged(delegator, currentDelegate, delegatee);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _moveDelegates(currentDelegate, delegatee, delegatorBalance);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function _transferTokens(address src, address dst, uint96 amount) internal {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(src != address(0), &quot;FESW::_transferTokens: cannot transfer from the zero address&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(dst != address(0), &quot;FESW::_transferTokens: cannot transfer to the zero address&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        balances[src] = sub96(balances[src], amount, &quot;FESW::_transferTokens: transfer amount exceeds balance&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        balances[dst] = add96(balances[dst], amount, &quot;FESW::_transferTokens: transfer amount overflows&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        emit Transfer(src, dst, amount);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _moveDelegates(delegates[src], delegates[dst], amount);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function _moveDelegates(address srcRep, address dstRep, uint96 amount) internal {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if (srcRep != dstRep &amp;&amp; amount &gt; 0) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            if (srcRep != address(0)) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                uint32 srcRepNum = numCheckpoints[srcRep];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                uint96 srcRepOld = srcRepNum &gt; 0 ? checkpoints[srcRep][srcRepNum - 1].votes : 0;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                uint96 srcRepNew = sub96(srcRepOld, amount, &quot;FESW::_moveVotes: vote amount underflows&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                _writeCheckpoint(srcRep, srcRepNum, srcRepOld, srcRepNew);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            if (dstRep != address(0)) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                uint32 dstRepNum = numCheckpoints[dstRep];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                uint96 dstRepOld = dstRepNum &gt; 0 ? checkpoints[dstRep][dstRepNum - 1].votes : 0;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                uint96 dstRepNew = add96(dstRepOld, amount, &quot;FESW::_moveVotes: vote amount overflows&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                _writeCheckpoint(dstRep, dstRepNum, dstRepOld, dstRepNew);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function _writeCheckpoint(address delegatee, uint32 nCheckpoints, uint96 oldVotes, uint96 newVotes) internal {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      uint32 blockNumber = safe32(block.number, &quot;FESW::_writeCheckpoint: block number exceeds 32 bits&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      if (nCheckpoints &gt; 0 &amp;&amp; checkpoints[delegatee][nCheckpoints - 1].fromBlock == blockNumber) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          checkpoints[delegatee][nCheckpoints - 1].votes = newVotes;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      } else {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          checkpoints[delegatee][nCheckpoints] = Checkpoint(blockNumber, newVotes);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          numCheckpoints[delegatee] = nCheckpoints + 1;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      emit DelegateVotesChanged(delegatee, oldVotes, newVotes);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function safe32(uint n, string memory errorMessage) internal pure returns (uint32) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(n &lt; 2**32, errorMessage);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return uint32(n);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function safe96(uint n, string memory errorMessage) internal pure returns (uint96) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(n &lt; 2**96, errorMessage);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return uint96(n);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function add96(uint96 a, uint96 b, string memory errorMessage) internal pure returns (uint96) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint96 c = a + b;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(c &gt;= a, errorMessage);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return c;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function sub96(uint96 a, uint96 b, string memory errorMessage) internal pure returns (uint96) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        require(b &lt;= a, errorMessage);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return a - b;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function getChainId() internal pure returns (uint) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 chainId;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        assembly { chainId := chainid() }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return chainId;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/feswap/docs/Contracts/Fesw.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« FeSwap Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Contracts/factory"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Factory Â»</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/Feswap/introduction">FeSwap Governance</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/FreeSwap/abstract">FreeSwap Protocol</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://t.me/FeSwap" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/feswap66" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/feswap" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 FeSwap Decentralized Exchange. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.776b16e6.js"></script>
<script src="/assets/js/main.82801d3f.js"></script>
</body>
</html>